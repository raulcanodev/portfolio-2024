---
import { getEntry } from "astro:content";

interface Props {
	image: string;
	title: string;
	slug: string;
	category: string;
}

const { title, slug, image, category } = Astro.props;
const entry = await getEntry("blog", slug);

if (!slug) {
	throw new Error("No slug provided");
}

if (entry === undefined) {
	return Astro.redirect("/404");
}

// Directly use the Markdown content
const contentText = entry.body;

// Get the first 160 characters of the content
const previewText = contentText.length > 160 ? contentText.substring(0, 160) + "..." : contentText;

const imagePath = `/images/${image}`;
const linkPath = `/blogs/${slug}`;
---

src/components/blog/PreviewImagen.astro public/images

<div
	class="flex flex-col md:flex-row border border-gray-200 overflow-hidden hover:border-green-500">
	<div class="md:w-1/3">
		<img
			src={imagePath}
			alt="Health Tips for 2024"
			class="w-full h-full object-cover hover:bg-blend-overlay hover:scale-105 transition-all duration-300"
		/>
	</div>
	<div class="md:w-2/3 p-6">
		<div class="flex justify-between items-center text-sm mb-2 text-white">
			<time datetime="2024-06-28">28/06/2024</time>
			<span class="bg-green-500 capitalize text-black text-bold px-2 py-1"
				>{category}</span
			>
		</div>
		<h2 class="text-2xl font-semibold mb-2">
			<a href="#" class="hover:text-green-500">{title}</a>
		</h2>
		<p class="text-gray-400">
			{previewText}
		</p>
		<div class="mt-4 text-gray-500">
			<span>By </span>
			<span class="font-semibold text-gray-700">Raul Cano</span>
		</div>
	</div>
</div>

<style>
	div:hover a {
		color: var(--contrast);
		transition-property: all;
		transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
		transition-duration: 150ms;
	}
</style>
